## 一、Trojan 部署方式（高概率）”

### ✅ 方案 A

**Xray-core + Trojan + TLS（443）**

特点：

* 端口：443
* 有证书（acme.sh / certbot）
* systemd 服务
* 非 Docker
* 客户端可被 Passwall / Clash / v2rayN 直接导入

---

## 二、先快速确认：现在 VPS 上还有没有“痕迹”

你先在 VPS 上跑这几条命令看看：

### 1️⃣ 看有没有 Xray / v2ray

```bash
which xray
which v2ray
```

或：

```bash
ls /usr/local/bin | grep -E "xray|v2ray"
```

---

### 2️⃣ 看 systemd 服务

```bash
systemctl list-unit-files | grep -E "xray|v2ray|trojan"
```

常见名字：

* `xray.service`
* `v2ray.service`
* `trojan.service`

---

### 3️⃣ 看配置文件目录

```bash
ls /usr/local/etc/
```

重点找：

* `/usr/local/etc/xray/config.json`
* `/etc/xray/config.json`
* `/etc/v2ray/config.json`

---

### 4️⃣ 看 443 端口是谁在用

```bash
ss -lntp | grep :443
```

如果看到 `xray` / `v2ray`，那就对上了。

---

## 三、如果你想“直接复原一套你当年八成用过的配置”

我给你一个**经典、稳定、你大概率就是这么配的 Trojan（Xray）方案**。

---

### 1️⃣ 安装 Xray（官方脚本）

```bash
bash <(curl -Ls https://github.com/XTLS/Xray-install/raw/main/install-release.sh)
```

---

### 2️⃣ 申请证书（你当时大概率用的是 acme.sh）

```bash
curl https://get.acme.sh | sh
source ~/.bashrc
```

申请证书（假设域名是 `example.com`）：

```bash
acme.sh --issue -d example.com --standalone
```

安装证书：

```bash
acme.sh --install-cert -d example.com \
--key-file /etc/xray/trojan.key \
--fullchain-file /etc/xray/trojan.crt
```

---

### 3️⃣ Trojan（Xray）配置示例

`/etc/xray/config.json`

```json
{
  "inbounds": [
    {
      "port": 443,
      "protocol": "trojan",
      "settings": {
        "clients": [
          {
            "password": "你的trojan密码"
          }
        ]
      },
      "streamSettings": {
        "network": "tcp",
        "security": "tls",
        "tlsSettings": {
          "certificates": [
            {
              "certificateFile": "/etc/xray/trojan.crt",
              "keyFile": "/etc/xray/trojan.key"
            }
          ]
        }
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom"
    }
  ]
}
```

---

### 4️⃣ 启动并设为开机自启

```bash
systemctl enable xray
systemctl restart xray
systemctl status xray
```

---

## 四、客户端你当时“极可能是这样用的”

### Passwall / v2rayN / Clash

* 协议：**Trojan**
* 地址：你的域名
* 端口：443
* 密码：上面那个
* TLS：开启
* SNI：域名（可留空）

---

